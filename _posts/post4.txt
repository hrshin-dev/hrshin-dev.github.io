<div id="main-content" class="wiki-content">
                           
        <h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-목표">목표</h2><p style="margin-left: 40.0px;">Unity에서 자연어로 대화하고, 상황에 맞는 애니메이션까지 반응하는 <strong>똑똑한 NPC</strong> 만들기</p><p><br></p><h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-사용스펙">사용 스펙</h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 18.1048%;margin-left: 40.0px;" resolved=""><colgroup><col style="width: 27.2507%;"><col style="width: 72.8237%;"></colgroup><tbody><tr><td class="confluenceTd">LLM 인터페이스</td><td class="confluenceTd">LM Studio</td></tr><tr><td class="confluenceTd">사용 LLM 모델</td><td class="confluenceTd">llama-3.2-korean-bllossom-3b.Q4_K_M.gguf</td></tr><tr><td class="confluenceTd">연결 방식</td><td class="confluenceTd">HTTP API</td></tr></tbody></table></div><h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-1.LMStudio설치및모델세팅">1. LM Studio 설치 및 모델 세팅</h2><p style="margin-left: 40.0px;">1. LM Studio 설치<br><a href="https://lmstudio.ai" class="external-link" rel="nofollow">https://lmstudio.ai</a> 에서 다운로드하여 설치</p><p style="margin-left: 40.0px;">2. 모델 다운로드<br>LM Studio 내부 모델 브라우저에서<br>llama-3.2-korean-bllossom-3b.Q4_K_M 검색 후 다운로드</p><p style="margin-left: 40.0px;">3. 서버 실행<br>Developer 탭 &gt; Status: Running 활성화 (연결 Url 및 포트 번호 확인)</p><p style="margin-left: 40.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="/download/attachments/264051817/ul1.png?version=1&amp;modificationDate=1744700051790&amp;api=v2" data-image-src="/download/attachments/264051817/ul1.png?version=1&amp;modificationDate=1744700051790&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="264051884" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ul1.png" data-base-url="https://nwiki.neowiz.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="264051817" data-linked-resource-container-version="1"></span></p><p style="margin-left: 40.0px;"><br></p><h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-2.Unity와LLM연동">2. Unity와 LLM 연동</h2><p style="margin-left: 40.0px;">1. 역할 부여<br>"You are a kind NPC in a fantasy village. Your name is Ellena and you are 14 years old. Respond in perfect Korean."<br>판타지 마을에 살고 있는 14살 엘레나라는 역할을 부여하고, 한국말로만 말하도록 요청</p><p style="margin-left: 40.0px;">2. UnityWebRequest를 통해 LLM 서버에 메시지를 보내고, 응답을 받음<br><a href="http://localhost:1234/v1/chat/completions" class="external-link" rel="nofollow">http://localhost:1234/v1/chat/completions</a></p><p style="margin-left: 40.0px;">3. InputField에 대화를 작성하여 전송하면 응답 내용을 Text에 노출하는 형태</p><p style="margin-left: 40.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="/download/attachments/264051817/ul2.png?version=1&amp;modificationDate=1744700753018&amp;api=v2" data-image-src="/download/attachments/264051817/ul2.png?version=1&amp;modificationDate=1744700753018&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="264052031" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ul2.png" data-base-url="https://nwiki.neowiz.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="264051817" data-linked-resource-container-version="1"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="/download/attachments/264051817/ul3.png?version=1&amp;modificationDate=1744700923627&amp;api=v2" data-image-src="/download/attachments/264051817/ul3.png?version=1&amp;modificationDate=1744700923627&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="264052040" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ul3.png" data-base-url="https://nwiki.neowiz.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="264051817" data-linked-resource-container-version="1"></span></p><p style="margin-left: 40.0px;">=&gt; 한국어가 조금 부족함. 응답에 한자, 영어, 타국어가 섞여있는 경우가 많음.</p><p style="margin-left: 40.0px;"><br></p><h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-3.NPC애니메이션연동">3. NPC 애니메이션 연동</h2><p style="margin-left: 40.0px;">3D 모델링을 추가하고 응답에 따라 상황에 맞는 감정 표현을 추가하려 함.</p><p style="margin-left: 80.0px;">준비한 애니메이션</p><ul><li style="list-style-type: none;"><ul><li style="list-style-type: none;"><ul><li><p>👋 <code>Hi</code> : 인사</p></li><li><p>👍 <code>Yes</code> : 고개 끄덕이기</p></li><li><p>🙅 <code>No</code> : 고개 젓기</p></li><li><p>👉 <code>Point</code> : 손가락으로 방향 가리키기</p></li><li><code>Idle</code></li></ul></li></ul></li></ul><p style="margin-left: 40.0px;">1. 역할 내용 추가<br>"At the end of each response, append exactly one of the following tags to indicate your intent:<br>1. [HI] if you are greeting someone.<br>2. [YES] if you are agreeing, affirming, or responding positively.<br>3. [NO] if you are disagreeing, refusing, or responding negatively.<br>4. [POINT] if you are pointing in a direction, giving instructions, or referring to a place.<br>5. [IDLE] if your message does not clearly express any of the above intents."<br>응답 끝부분에 준비한 반응 중 하나를 더할 수 있게 유도함</p><p style="margin-left: 40.0px;">2. 추가된 반응 태그를 파싱하여 상황별 애니메이션 출력</p><p style="margin-left: 40.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="/download/attachments/264051817/ul4.png?version=1&amp;modificationDate=1744701570494&amp;api=v2" data-image-src="/download/attachments/264051817/ul4.png?version=1&amp;modificationDate=1744701570494&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="264052097" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ul4.png" data-base-url="https://nwiki.neowiz.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="264051817" data-linked-resource-container-version="1"></span><br>응답 예시 : 북쪽은 그늘의 끝을 따라서, 산들과 숲이 가득한 곳에 있습니다. 그곳으로 가면 조용하고 아름답습니다. [POINT]<br>Point 애니메이션 재생</p><p style="margin-left: 40.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="/download/attachments/264051817/ul5.png?version=1&amp;modificationDate=1744701670694&amp;api=v2" data-image-src="/download/attachments/264051817/ul5.png?version=1&amp;modificationDate=1744701670694&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="264052103" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="ul5.png" data-base-url="https://nwiki.neowiz.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="264051817" data-linked-resource-container-version="1"></span><br>응답 예시 : 너는 언제나 좋은 시간을 보내길 바라는 마음으로待고 계신다. 다음에 만나는 समय가 되면 꼭 찾아오면 좋겠어! [HI]<br>Hi 애니메이션 재생</p><p style="margin-left: 40.0px;"><br></p><p style="margin-left: 40.0px;"><br></p><h2 id="R&amp;D/Unity와LLM으로지능형NPC만들기Llama3한국어모델-총평">총평</h2><p style="margin-left: 40.0px;">LMStudio에서 다운 가능한 LLM 모델들을 테스트 해봤는데 (phi - 2, Nous Hermes 2) 영어로 대화가 가능했으나 한국어가 지원되지 않았고,</p><p style="margin-left: 40.0px;">한국어 가능 모델인 llama-3.2-Korean-Bllossom-3b를 사용했지만 완벽한 한국어 구사는 불가능했다.(고사양 버전은 좀 더 괜찮을지도)</p><p style="margin-left: 40.0px;">중간 중간 한자나 영어 타국어가 섞여있었고 문장 자체도 매끄럽지 않았다.</p><p style="margin-left: 40.0px;">또한 응답에 따른 반응을 추가하기 위해 반응 태그를 항상 응답에 추가하도록 유도했지만</p><p style="margin-left: 40.0px;">태그를 아예 붙여주지 않거나, 응답 내용과 동떨어진 태그를 붙일 때도 있었다.(시도때도 없이 [HI]를 추가한다던지)</p><p style="margin-left: 40.0px;">실제 서비스에 사용하기에는 아직은 무리다.</p><p style="margin-left: 40.0px;">OpenAI API를 사용해보려 했는데 유료다..</p><p><br></p>

                
        
    
        <div id="tfac-macro-inserter-container" style="display: block; top: 346px; left: 248px;"><button class="aui-button aui-button-compact aui-button-subtle aui-dropdown2-trigger" aria-controls="tfac-macro-inserter" title="Insert table macros" resolved="" aria-haspopup="true" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-add"></span></button></div><aui-dropdown-menu id="tfac-macro-inserter" resolved="" role="menu" class="aui-dropdown2 aui-style-default aui-layer" aria-hidden="true">
        <div role="application">
            <!-- content {"defaultContent":"","selector":null} --><aui-section resolved="" class=" aui-dropdown2-section" role="presentation">
        <strong aria-role="presentation" class="aui-dropdown2-heading"></strong>
        <div role="group">
            <!-- content {"defaultContent":"","selector":null} --><aui-item-link href="#" data-macro="table-filter" resolved="" style="display: block;"><a role="menuitem" tabindex="-1" href="#"><!-- content {"defaultContent":"","selector":null} --><span class="aui-icon aui-icon-small table-filter-inserter"></span>Filter table data<span class="aui-icon aui-icon-wait"></span><!-- /content --></a></aui-item-link><aui-item-link href="#" data-macro="pivot-table" resolved="" style="display: block;"><a role="menuitem" tabindex="-1" href="#"><!-- content {"defaultContent":"","selector":null} --><span class="aui-icon aui-icon-small pivot-table-inserter"></span>Create a pivot table<span class="aui-icon aui-icon-wait"></span><!-- /content --></a></aui-item-link><aui-item-link href="#" data-macro="table-chart" resolved="" style="display: block;"><a role="menuitem" tabindex="-1" href="#"><!-- content {"defaultContent":"","selector":null} --><span class="aui-icon aui-icon-small table-chart-inserter"></span>Create a chart from data series<span class="aui-icon aui-icon-wait"></span><!-- /content --></a></aui-item-link><!-- /content -->
        </div>
    </aui-section><aui-section resolved="" class=" aui-dropdown2-section" role="presentation">
        <strong aria-role="presentation" class="aui-dropdown2-heading"></strong>
        <div role="group">
            <!-- content {"defaultContent":"","selector":null} --><aui-item-link href="/users/tfac-settings.action" resolved=""><a role="menuitem" tabindex="-1" href="/users/tfac-settings.action"><!-- content {"defaultContent":"","selector":null} --><span class="aui-icon aui-icon-small aui-iconfont-configure" title="Configure visibility"></span>Configure buttons visibility<!-- /content --></a></aui-item-link><!-- /content -->
        </div>
    </aui-section><!-- /content -->
        </div>
    </aui-dropdown-menu><span class="tf-inline-filter" title="Filter column" style="top: 315.333px; left: 235.281px;"></span><div class="tf-inline-btn-container" style="display: block; top: 323px; left: 248px;">
        <button class="tf-inline-filter main aui-button aui-button-compact aui-button-subtle aui-dropdown2-trigger" title="Filter and export table" aria-haspopup="true" aria-expanded="false" resolved="" aria-controls="tfn">
            <span class="aui-icon aui-icon-small"></span>
        </button>
        <div id="tfn"></div>
      </div></div>